---
title: 困难
---

## 为什么 JS 浮点计算会丢失精度？底层是如何用二进制表示浮点数的？如何准确的比较两个浮点数相等？

<Answer>



</Answer>

## 如何使用实现深度克隆？

<Answer>

</Answer>

## 请实现符合 A+ 规范的 Promise

<Answer>

</Answer>

## CommonJS 和 ES Module 有什么区别？

<Answer>

</Answer>

## ES Module 是如何解决循环依赖的？

<Answer>

</Answer>

## V8 引擎是如何进行垃圾回收的？

<Answer>

V8 引擎会使用到分代回收、空间复制、标记清楚、标记整理、标记增量等 GC 算法。另外 V8 内存空间是由上限的一般为 1.5G 或 800M。

V8 的内存空间一分为二，分为新生代空间和老生代空间。
新生代空间存储存活时间较短的对象，一般空间大小为 32M 或 16M。
老生代空间存放存活时间较长的对象，一般空间大小为 1.4G 或 700M。

新生代内存会被分为两个相等大小的空间，使用中 `From` 和空闲 `To`，
新生代回收过程使用复制算法+标记整理，它会将活动对象存储与 From 空间，标记整理后将活动对象拷贝到 To 空间，然后 From 与 To 空间进行交换，从而释放内存。在拷贝过程中如何一个对象在一轮 GC 中还存活或者 To 空间使用率大于 25%，则直接拷贝到老生代空间。

老生代主要使用标记清楚、标记整理和增量标记算法。首先使用标记清除进行垃圾回收，如果老生代空间存放不下新对象时则会触发标记整理进行空间优化，因为垃圾回收会阻塞 JS 执行，所以增量标记，会让标记算法不会一次执行完毕，会和 JS 执行相互交换执行。

</Answer>
